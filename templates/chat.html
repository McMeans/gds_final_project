{% extends "base.html" %}

{% block title %}Chat with Human Bot{% endblock %}

{% block content %}
<div class="flex flex-col min-h-screen bg-amber-50">
    <header class="sticky top-0 z-10 bg-white border-b border-amber-200">
        <div class="container flex items-center justify-between h-16 px-4">
            <a href="/" class="flex items-center space-x-2">
                <svg class="w-5 h-5 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                </svg>
                <span class="font-medium text-amber-900">Back to Home</span>
            </a>
            <h1 class="text-xl font-bold text-amber-900">Chat with Human Bot</h1>
            <div class="w-24"></div>
        </div>
    </header>

    <main class="flex-1 container px-4 py-6 max-w-4xl mx-auto">
        <div class="bg-white rounded-xl shadow-sm p-4 mb-4 min-h-[500px] flex flex-col">
            <div class="flex-1 overflow-y-auto" id="chat-messages">
                <div class="h-full flex flex-col items-center justify-center text-center p-8">
                    <div class="w-20 h-20 bg-amber-100 rounded-full flex items-center justify-center mb-4">
                        <svg class="h-10 w-10 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 3.104v5.714a2.25 2.25 0 01-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 014.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0112 15a9.065 9.065 0 00-6.23-.693L5 14.5m14.8.8l1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0112 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5" />
                        </svg>
                    </div>
                    <h2 class="text-xl font-bold text-amber-900 mb-2">Welcome to Human Bot</h2>
                    <p class="text-gray-600 max-w-md">
                        I'm here to chat with you about anything. Feel free to ask me questions or just have a friendly
                        conversation!
                    </p>
                </div>
            </div>
        </div>

        <form id="chat-form" class="flex space-x-2">
            <input
                type="text"
                id="message-input"
                placeholder="Type your message..."
                class="flex-1 border-amber-200 focus-visible:ring-amber-500 rounded-md px-3 py-2"
            />
            <button
                type="submit"
                class="bg-amber-600 hover:bg-amber-700 text-white px-4 py-2 rounded-md"
            >
                <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
                </svg>
            </button>
        </form>
    </main>
</div>

<script>
document.getElementById('chat-form').addEventListener('submit', async (e) => {
    e.preventDefault();
    const input = document.getElementById('message-input');
    const message = input.value.trim();
    if (!message) return;

    // Add user message
    const messagesDiv = document.getElementById('chat-messages');
    messagesDiv.innerHTML = `
        <div class="flex justify-end mb-4">
            <div class="bg-amber-600 text-white p-3 rounded-lg max-w-[80%]">
                ${message}
            </div>
        </div>
    `;

    // Clear input
    input.value = '';

    // Get bot response
    try {
        const response = await fetch('/api/chat', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ message }),
        });
        const data = await response.json();

        // Add bot message
        messagesDiv.innerHTML += `
            <div class="flex justify-start mb-4">
                <div class="bg-amber-100 text-gray-800 p-3 rounded-lg max-w-[80%]">
                    ${data.message}
                </div>
            </div>
        `;
    } catch (error) {
        console.error('Error:', error);
    }
});
</script>
{% endblock %} 