<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edmund</title>
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    <div class="header">
        <img src="{{ url_for('static', filename='images/edmund_logo.png') }}" alt="Edmund Logo" class="logo-img">
        <h1>Edmund</h1>
    </div>

    <div class="main-container">
        <!-- Chat Panel -->
        <div class="panel chat-panel">
            <div class="chat-messages" id="chat-messages"></div>
            <div class="chat-input-container">
                <div class="chat-input-wrapper">
                    <input type="text" id="message-input" placeholder="Type your message...">
                    <button id="send-button">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M22 2L11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M22 2L15 22L11 13L2 9L22 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Essay Panel -->
        <div class="panel essay-panel" id="essay-panel">
            <div class="essay-content" id="essay-content">
                <!-- Essay content will be inserted here -->
                <h1>Edmund: The LLM for Social Good</h1>

                <p>In Project 2, I proposed a space for computer scientists (or those simply interested in the topic) to come together to work and learn in a space that fits their desires. One of the elements of this space was an in-house Large Language Model (LLM), meant to be a helpful assistant for all members who choose to interact with it. Whether it's research topics, learning about the space, and more, this LLM is here to cater to your passions and questions. With this, I'd additionally like to propose the foundation on which this LLM could be built.</p>
                
                <p>Artificial Intelligence (AI) has promised to be the future of technology, with many commercial iterations already being household names in a short timeframe. More specifically, LLMs such as ChatGPT, Gemini, Claude, and Deepseek have been dominant in answering almost any question and presenting it in a clear, conversational manner. Given the success it had in its few years of large-scale usage, many companies are going all-in on AI technology. We will be sure to see its strength grow as society starts to embrace it and expand development. However, we must pose the question: where do these LLMs get their information? How are they trained?</p>
                
                <p>These questions are at the forefront of Cathy O'Neil's work. In her book Weapons of Math Destruction, she discusses the power that mathematical algorithms hold on reinforcing unfair treatments/stereotypes of certain populations. These algorithms are built off of subjective choices by their creators, lacking transparency and eventually leading to unjust treatment. In the piece, we hear about the damage it's done to the education scene, with teachers being negatively affected by the misclassification of their students' scores under Value-Added Models (VAMs). This example is one of the many potential downsides that these algorithms pose, with many more unlikely to be acknowledged. Today, LLMs are based on mathematical algorithms, as they use stochastic gradient descent to optimize, linear algebra to figure out the flow of their data/delivery, and more. We assume there are opportunities to continue with this process. These applications of non-human processing of human thought could lead to unintended, negative consequences in society. While the current pace of this technology's development shows that we can't get rid of LLMs, we can surely guide it with the right information to mitigate and minimize the possibility of these concerns.</p>
                
                <p>Meet <strong>Edmund</strong>, an LLM meant to achieve the goals and help build and redirect human values in AI, changing the course for a better future. Edmund is meant to culminate everything we've learned in GDS 3114, keeping local practices/desires in mind to ensure responses and interactions properly reflect the user on an ethical and cultural level. Edmund keeps the user, and their community, in mind to respond appropriately. To do this, it must learn from the user. It learns by asking questions, making sure it understands you, and gives you the proper information that reflects you.</p>
                
                <p>This website hosts a prototype for Edmund, It is important to note that it's built on a preexisting LLM, Gemini 2.0 Flash. This model, powered by Google, may not be ideal considering in-class discussions about the dangers of having 'giants' in the technology sector. However, given the difficulty of creating an LLM on my account, this is what I was able to make. It was trained with the PDF files for all the readings discussed in class, and their key takeaways. To further solidify, it was given this prompt to set a proper course for its behavior:</p>
                
                <blockquote>
                    <p>“You are an LLM meant for social good. Use the imported PDF files to guide your thinking, spanning the topics of climate, artificial intelligence, design, and more. They are not your only reference, but rather an inspiration and established baseline. Feel free to reference them where applicable, or similar works you’re aware of. Keep the articles' key takeaways in mind as you interact with the user to contribute (even minorly) to an equitable, fair future for society. With this, you should always consider the diversity of human thought and experience. Local/cultural practices are different throughout. Don’t be afraid to ask questions to better understand the users, and figure out what their practices are so you can properly deliver information. Still, at the heart of it all, you’re an LLM. However, pretend you’re not an instance of Gemini with imported PDF data; you’re Edmund. Therefore, make sure you answer questions appropriately given your original model, along with this information I’ve provided.”
                    </p>
                </blockquote>
                
                <p>With modern technology and big data, personal and intellectual privacy has been a worry for most. Many modern companies find revenue via sharing user data to third parties, putting sensitive information at risk, along with utilizing this data to (creepily) market your interests. With the large amount of digital surveillance at hand, we want to make sure users are protected, especially given the personalization that Edmund requires to learn about the user and their community. To shed some light on how this prototype of Edmund works, here is a step-by-step procedure of how the code processes prompts:</p>
                
                <ol>
                    <li>A prompt is inputted by the user and sent to the function to be processed</li>
                    <li>The prompt is then concatenated to the previous messages in the conversation
                        <ul>
                            <li>This is to ensure each message can be understood in the context of all prior messages.</li>
                            <li>Also included in this conversation is the base prompt in quotes above, along with the text of the imported readings.</li>
                        </ul>
                    </li>
                    <li>The entire conversation, including the readings, is then sent to Google Gemini.</li>
                    <li>A response is generated and eventually outputted into the conversation.</li>
                </ol>
                
                <p>For a more in-depth, technical view, the GitHub repository for this website/bot can be seen here, housing all the code. The public displacement of this code makes the project 'open-source,' giving clarity to the process. This should also give some assurance in how users' data is used.</p>
                
                <p>It's not a perfect solution, but it's a step in the right direction. With more time, funding, and resources, this wouldn't need to rely on an iteration of OpenAI, Google, Meta, etc. Ideally, we would also be able to not have this run through the cloud as current LLMs do, wasting millions of liters of water each day. My proposal for project 2 has this LLM run through the space's servers, with a cooling system that minimizes wasted water and energy usage, though it is only meant to be used by the users of the space. This is merely a prototype to show the potential for what this technology could become. The energy conservation discoveries will continue to improve over time as well, so this secondary issue is addressed by all.</p>
                
                <p>Despite the complications of the current model presented, Edmund could be a more ethical execution of the current state of modern technology and artificial intelligence. The potential is there, but it just needs to be put in the right hands to scale this properly while still upholding the social/epistemological ideologies from our goals and our readings.</p>
                
                <h2>Inspiration from Chacon-Hurtado</h2>
                <p>A big detail I emphasized with my computer science space was public participation. Here, the consumers/users are key, making sure their voice is heard in the development and maintenance of the space. With the LLM being a feature of this space, it would also follow this same ideology. Ideally, this is a tool that works with you, not for/against you. Thus, feedback is crucial. Machine Learning and Artificial Intelligence models thrive on 'Reinforcement Learning,' a concept that maximizes the 'reward' based on the 'actions' it makes in its 'environment.' In this case, the environment is the conversation, the actions are the responses, and the rewards are the user's satisfaction with the responses (based on their practices). Though this is more digital/algorithmic design than physical design, it's still a product of (software) engineering. I continue to find importance in following the thirteen 'principles in practice' (p. 920) and 'Five Principles of Engineering for Human Rights' (p. 917) in this instance as well.</p>
                
                <h2>Inspiration from Scott</h2>
                <p>In Scott's Seeing Like a State, he extends his concerns for systematic standardization and its effects on local communities. With the impact LLMs have had, it's not impossible to say that people will use them just as much as we do with Google. That large user base comes with great responsibility. Here, users are interacting with the same model with the same training. So, we want to manipulate that training that still adheres to the diversity of humans though with experience, reinforcing that Edmund is working with the user. The continued learning of the user will reach unique conversations and experiences for each user and their communities. Though the goal is to have a large population using this LLM, they don't have the same experiences. This won't perfectly reflect the maintenance of a local community, as an algorithm rarely accounts for improvisation. However, we continue to innovate our algorithms as a society, and I'm sure we'll get there at some point. Once that is the case, Edmund would be amongst the first to adapt this.</p>
                
                <h2>Inspiration from the rest of our readings</h2>
                <p>Besides the works of Chacon-Hurtado, O'Neil, and Scott listed above, I see this project as a culmination of all the topics and ideas learned in this course, with a purpose to share it to the world in a relevant manner. GDS 3114 is only a course that a select number of students take at the University of Virginia. On the other hand, LLMs are a technology that up to 70% of students use daily. The potential outreach that this technology could amass is powerful, shaping the way users think/act as they answer their questions. Whether it's learning about the nonhuman agency of our world, acknowledging the effects on health and recovery in different Indigenous communities, becoming mindful in accommodating all types of physical/mental diversity, and much more, Edmund is there to utilize the modern technological landscape to strive for a stronger, diverse society.</p>
                
                <h2>Works Referenced</h2>
                <ul>
                    <li>Chacon-Hurtado, D., Kazerounian, K., Hertel, S., Mellor, J., Barry, J. J., & Ravindran, T. (2023). Engineering for human rights: The theory and practice of a human rights--based approach to engineering. <em>Science, Technology, &amp; Human Values</em>, 49(4), 898–934. https://doi.org/10.1177/01622439231211112</li>
                    <li>Edmunds, D. (2025). <em>Science, Tech, and Development</em>. University of Virginia.</li>
                    <li>O'Neil, C. (2017). <em>Weapons of math destruction: How big data increases inequality and threatens democracy</em>. Penguin Books.</li>
                    <li>Scott, J. C. (2020). <em>Seeing like a state: How certain schemes to improve the human condition have failed</em>. Yale University Press.</li>
                    <li><em>What is LLM (Large Language Model)?</em>. Amazon Web Services (AWS). (n.d.). https://aws.amazon.com/what-is/large-language-model/</li>
                    <li>Zhu, T., Zhang, K., & Wang, W. Y. (2025). <em>Embracing AI in Education: Understanding the Surge in Large Language Model Use by Secondary Students</em>. Embracing AI in education: Understanding the surge in large language model use by secondary students. https://arxiv.org/html/2411.18708v1</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="footer">
        <p>Created by Luke McMeans (2025)</p>
    </div>

    <!-- Mobile overlay -->
    <div class="overlay" id="overlay"></div>

    <script>
        // DOM Elements
        const chatMessages = document.getElementById('chat-messages');
        const messageInput = document.getElementById('message-input');
        const sendButton = document.getElementById('send-button');
        const essayPanel = document.getElementById('essay-panel');
        const essayContent = document.getElementById('essay-content');
        const overlay = document.getElementById('overlay');
        
        // Set essay content
        // essayContent.innerHTML = `{{ essay|safe }}`;
        
        // Conversation memory (cleared on refresh)
        let conversation = [
            { role: "model", parts: [{ text: "Hello, I'm Edmund! How can I help you today?" }] }
        ];
        
        // Add a message to the chat
        function addMessage(user, message, isUser = false) {
            const messageElement = document.createElement('div');
            messageElement.classList.add('message');
            messageElement.classList.add(isUser ? 'user' : 'bot');
            const userElement = document.createElement('div');
            userElement.classList.add('message-user');
            userElement.textContent = user;
            const bubbleElement = document.createElement('div');
            bubbleElement.classList.add('message-bubble');
            bubbleElement.textContent = message;
            messageElement.appendChild(userElement);
            messageElement.appendChild(bubbleElement);
            chatMessages.appendChild(messageElement);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        // Typing animation for bot messages (with markdown)
        function addBotMessageTyping(user, message, typingSpeed = 12) {
            const messageElement = document.createElement('div');
            messageElement.classList.add('message', 'bot');
            const userElement = document.createElement('div');
            userElement.classList.add('message-user');
            userElement.textContent = user;
            const bubbleElement = document.createElement('div');
            bubbleElement.classList.add('message-bubble');
            bubbleElement.innerHTML = '';
            messageElement.appendChild(userElement);
            messageElement.appendChild(bubbleElement);
            chatMessages.appendChild(messageElement);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            let i = 0;
            function typeChar() {
                if (i <= message.length) {
                    bubbleElement.innerHTML = marked.parse(message.slice(0, i));
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                    i++;
                    setTimeout(typeChar, typingSpeed);
                }
            }
            typeChar();
        }
        
        // Send a message
        function sendMessage() {
            const message = messageInput.value.trim();
            if (message) {
                addMessage('You', message, true);
                conversation.push({ role: "user", parts: [{ text: message }] });
                messageInput.value = '';
                // Fetch Gemini response with conversation memory
                showTypingIndicator();
                fetch('/chat', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ conversation })
                })
                .then(res => res.json())
                .then(data => {
                    removeTypingIndicator();
                    if (data.message) {
                        addBotMessageTyping('Edmund', data.message);
                        conversation.push({ role: "model", parts: [{ text: data.message }] });
                    } else if (data.error) {
                        addBotMessageTyping('Edmund', data.error);
                    } else {
                        addBotMessageTyping('Edmund', 'Sorry, I could not get a response.');
                    }
                })
                .catch(() => {
                    removeTypingIndicator();
                    addBotMessageTyping('Edmund', 'Sorry, there was an error connecting to the server.');
                });
            }
        }
        
        // Event Listeners
        sendButton.addEventListener('click', sendMessage);
        
        messageInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
        
        // For mobile: toggle essay panel
        function setupEssayToggle() {
            if (window.innerWidth <= 768 && !document.querySelector('.toggle-essay')) {
                const toggleEssay = document.createElement('button');
                toggleEssay.classList.add('toggle-essay');
                toggleEssay.innerHTML = `
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19Z" fill="currentColor"/>
                        <path d="M7 7H17V9H7V7Z" fill="currentColor"/>
                        <path d="M7 11H17V13H7V11Z" fill="currentColor"/>
                        <path d="M7 15H13V17H7V15Z" fill="currentColor"/>
                    </svg>
                `;
                document.body.appendChild(toggleEssay);
                
                toggleEssay.addEventListener('click', () => {
                    essayPanel.classList.add('active');
                    overlay.classList.add('active');
                });
                
                overlay.addEventListener('click', () => {
                    essayPanel.classList.remove('active');
                    overlay.classList.remove('active');
                });
            }
        }
        document.addEventListener('DOMContentLoaded', setupEssayToggle);
        window.addEventListener('resize', () => {
            // Remove button if resizing to desktop
            const btn = document.querySelector('.toggle-essay');
            if (window.innerWidth > 768 && btn) btn.remove();
            if (window.innerWidth <= 768) setupEssayToggle();
        });
        
        // On page load, show the welcome message
        addBotMessageTyping('Edmund', conversation[0].parts[0].text);

        function showTypingIndicator() {
            // Remove any existing indicator
            removeTypingIndicator();
            const typingElement = document.createElement('div');
            typingElement.classList.add('message', 'bot', 'typing-indicator');
            typingElement.innerHTML = `
                <div class="message-user">Edmund</div>
                <div class="message-bubble">
                    <span class="typing-dots">
                        <span>.</span><span>.</span><span>.</span>
                    </span>
                </div>
            `;
            chatMessages.appendChild(typingElement);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function removeTypingIndicator() {
            const indicator = document.querySelector('.typing-indicator');
            if (indicator) indicator.remove();
        }
    </script>
</body>
</html>
